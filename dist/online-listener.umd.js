(function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):(e=e||self,r(e["online-listener"]={}))})(this,function(e){'use strict';function r(e,r){function t(){this.constructor=e}U(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}function t(e){return"function"==typeof e}function o(e){setTimeout(function(){throw e},0)}function n(e){return null!==e&&"object"==typeof e}function s(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,r){return r+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}function c(e){return e.reduce(function(e,r){return e.concat(r instanceof B?r.errors:r)},[])}function i(e){for(;e;){var r=e,t=r.closed,o=r.destination,n=r.isStopped;if(t||n)return!1;e=o&&o instanceof J?o:null}return!0}function u(e,r,t){if(e){if(e instanceof J)return e;if(e[F])return e[F]()}return e||r||t?new J(e,r,t):new J(R)}function p(){}function d(e){return e?1===e.length?e[0]:function(r){return e.reduce(function(e,r){return r(e)},r)}:p}function l(e){if(e||(e=Promise),!e)throw new Error("no Promise impl found");return e}function a(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}function b(){return function(e){return e.lift(new oe(e))}}function y(e){return e?_(e):he}function _(e){return new K(function(r){return e.schedule(function(){return r.complete()})})}function h(e){return e&&"function"==typeof e.schedule}function f(e,r){return new K(function(t){var o=new L,n=0;return o.add(r.schedule(function(){return n===e.length?void t.complete():void(t.next(e[n++]),!t.closed&&o.add(this.schedule()))})),o})}function x(e,r){return r?f(e,r):new K(fe(e))}function m(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=e[e.length-1];return h(t)?(e.pop(),f(e,t)):x(e)}function g(e,r){return r?new K(function(t){return r.schedule(S,0,{error:e,subscriber:t})}):new K(function(r){return r.error(e)})}function S(e){var r=e.error,t=e.subscriber;t.error(r)}function E(e,r){return function(t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return t.lift(new we(e,r))}}function v(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}function w(e,r,t,o,n){return void 0===n&&(n=new Oe(e,t,o)),n.closed?void 0:r instanceof K?r.subscribe(n):De(r)(n)}function T(e,r){return new K(function(t){var o=new L;return o.add(r.schedule(function(){var n=e[X]();o.add(n.subscribe({next:function(e){o.add(r.schedule(function(){return t.next(e)}))},error:function(e){o.add(r.schedule(function(){return t.error(e)}))},complete:function(){o.add(r.schedule(function(){return t.complete()}))}}))})),o})}function j(e,r){return new K(function(t){var o=new L;return o.add(r.schedule(function(){return e.then(function(e){o.add(r.schedule(function(){t.next(e),o.add(r.schedule(function(){return t.complete()}))}))},function(e){o.add(r.schedule(function(){return t.error(e)}))})})),o})}function O(e,r){if(!e)throw new Error("Iterable cannot be null");return new K(function(t){var o,n=new L;return n.add(function(){o&&"function"==typeof o.return&&o.return()}),n.add(r.schedule(function(){o=e[Ce](),n.add(r.schedule(function(){if(!t.closed){var e,r;try{var n=o.next();e=n.value,r=n.done}catch(e){return void t.error(e)}r?t.complete():(t.next(e),this.schedule())}}))})),n})}function P(e){return e&&"function"==typeof e[X]}function C(e){return e&&"function"==typeof e[Ce]}function A(e,r){if(null!=e){if(P(e))return T(e,r);if(v(e))return j(e,r);if(Ie(e))return f(e,r);if(C(e)||"string"==typeof e)return O(e,r)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function N(e,r){return r?A(e,r):e instanceof K?e:new K(De(e))}function I(e){return!G(e)&&0<=e-parseFloat(e)+1}function D(e,r){return void 0===e&&(e=0),void 0===r&&(r=ve),(!I(e)||0>e)&&(e=0),r&&"function"==typeof r.schedule||(r=ve),new K(function(t){return t.add(r.schedule(M,e,{subscriber:t,counter:0,period:e})),t})}function M(e){var r=e.subscriber,t=e.counter,o=e.period;r.next(t),this.schedule({subscriber:r,counter:t+1,period:o},o)}function k(e,r){return function(t){return t.lift(new Me(e,r))}}function V(e,r){return"function"==typeof r?function(t){return t.pipe(V(function(t,o){return N(e(t,o)).pipe(E(function(e,n){return r(t,e,o,n)}))}))}:function(r){return r.lift(new Ve(e))}}function Y(){return Ue?fetch(Ue).catch(r=>(console.warn("polling failed",r),{})):(console.warn("polling url needs to be set"),Promise.resolve({}))}function H(){W(),ze=D(1e3).pipe(k(e=>{if(0===pollCount)return!0;return 15>=e?0==e%5:20<=e?0==e%10:void 0}),V(()=>N(Y()))).subscribe(e=>{200===e.status&&(He.next(!0),W())})}function W(){ze&&ze.unsubscribe&&ze.unsubscribe()}var U=function(e,r){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])},U(e,r)},z=!1,q={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var r=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+r.stack)}z=e},get useDeprecatedSynchronousErrorHandling(){return z}},R={closed:!0,next:function(){},error:function(e){if(q.useDeprecatedSynchronousErrorHandling)throw e;else o(e)},complete:function(){}},G=Array.isArray||function(e){return e&&"number"==typeof e.length};s.prototype=Object.create(Error.prototype);var B=s,L=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var r;if(!this.closed){var o=this,s=o._parentOrParents,i=o._unsubscribe,u=o._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,s instanceof e)s.remove(this);else if(null!==s)for(var p,d=0;d<s.length;++d)p=s[d],p.remove(this);if(t(i))try{i.call(this)}catch(t){r=t instanceof B?c(t.errors):[t]}if(G(u))for(var l,d=-1,a=u.length;++d<a;)if(l=u[d],n(l))try{l.unsubscribe()}catch(t){r=r||[],t instanceof B?r=r.concat(c(t.errors)):r.push(t)}if(r)throw new B(r)}},e.prototype.add=function(r){var t=r;switch(typeof r){case"function":t=new e(r);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof e)){var o=t;t=new e,t._subscriptions=[o]}break;default:{if(!r)return e.EMPTY;throw new Error("unrecognized teardown "+r+" added to Subscription.")}}var n=t._parentOrParents;if(null===n)t._parentOrParents=this;else if(n instanceof e){if(n===this)return t;t._parentOrParents=[n,this]}else if(-1===n.indexOf(this))n.push(this);else return t;var s=this._subscriptions;return null===s?this._subscriptions=[t]:s.push(t),t},e.prototype.remove=function(e){var r=this._subscriptions;if(r){var t=r.indexOf(e);-1!==t&&r.splice(t,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}(),F="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),J=function(e){function t(r,o,n){var s=e.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=R;break;case 1:if(!r){s.destination=R;break}if("object"==typeof r){r instanceof t?(s.syncErrorThrowable=r.syncErrorThrowable,s.destination=r,r.add(s)):(s.syncErrorThrowable=!0,s.destination=new Q(s,r));break}default:s.syncErrorThrowable=!0,s.destination=new Q(s,r,o,n);}return s}return r(t,e),t.prototype[F]=function(){return this},t.create=function(e,r,o){var n=new t(e,r,o);return n.syncErrorThrowable=!1,n},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(L),Q=function(e){function n(r,o,n,s){var c=e.call(this)||this;c._parentSubscriber=r;var i,u=c;return t(o)?i=o:o&&(i=o.next,n=o.error,s=o.complete,o!==R&&(u=Object.create(o),t(u.unsubscribe)&&c.add(u.unsubscribe.bind(u)),u.unsubscribe=c.unsubscribe.bind(c))),c._context=u,c._next=i,c._error=n,c._complete=s,c}return r(n,e),n.prototype.next=function(e){if(!this.isStopped&&this._next){var r=this._parentSubscriber;q.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?this.__tryOrSetError(r,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},n.prototype.error=function(e){if(!this.isStopped){var r=this._parentSubscriber,t=q.useDeprecatedSynchronousErrorHandling;if(this._error)t&&r.syncErrorThrowable?(this.__tryOrSetError(r,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(!r.syncErrorThrowable){if(this.unsubscribe(),t)throw e;o(e)}else t?(r.syncErrorValue=e,r.syncErrorThrown=!0):o(e),this.unsubscribe()}},n.prototype.complete=function(){var e=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var t=function(){return e._complete.call(e._context)};q.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?(this.__tryOrSetError(r,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}},n.prototype.__tryOrUnsub=function(e,r){try{e.call(this._context,r)}catch(e){if(this.unsubscribe(),q.useDeprecatedSynchronousErrorHandling)throw e;else o(e)}},n.prototype.__tryOrSetError=function(e,r,t){if(!q.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{r.call(this._context,t)}catch(r){return q.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(o(r),!0)}return!1},n.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},n}(J),X="function"==typeof Symbol&&Symbol.observable||"@@observable",K=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(r){var t=new e;return t.source=this,t.operator=r,t},e.prototype.subscribe=function(e,r,t){var o=this.operator,n=u(e,r,t);if(o?n.add(o.call(n,this.source)):n.add(this.source||q.useDeprecatedSynchronousErrorHandling&&!n.syncErrorThrowable?this._subscribe(n):this._trySubscribe(n)),q.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){q.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=r),i(e)?e.error(r):console.warn(r)}},e.prototype.forEach=function(e,r){var t=this;return r=l(r),new r(function(r,o){var n=t.subscribe(function(r){try{e(r)}catch(e){o(e),n&&n.unsubscribe()}},o,r)})},e.prototype._subscribe=function(e){var r=this.source;return r&&r.subscribe(e)},e.prototype[X]=function(){return this},e.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 0===e.length?this:d(e)(this)},e.prototype.toPromise=function(e){var r=this;return e=l(e),new e(function(e,t){var o;r.subscribe(function(e){return o=e},function(e){return t(e)},function(){return e(o)})})},e.create=function(r){return new e(r)},e}();a.prototype=Object.create(Error.prototype);var Z=a,$=function(e){function t(r,t){var o=e.call(this)||this;return o.subject=r,o.subscriber=t,o.closed=!1,o}return r(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,r=e.observers;if(this.subject=null,!(!r||0===r.length||e.isStopped||e.closed)){var t=r.indexOf(this.subscriber);-1!==t&&r.splice(t,1)}}},t}(L),ee=function(e){function t(r){var t=e.call(this,r)||this;return t.destination=r,t}return r(t,e),t}(J),re=function(e){function t(){var r=e.call(this)||this;return r.observers=[],r.closed=!1,r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return r(t,e),t.prototype[F]=function(){return new ee(this)},t.prototype.lift=function(e){var r=new te(this,this);return r.operator=e,r},t.prototype.next=function(e){if(this.closed)throw new Z;if(!this.isStopped)for(var r=this.observers,t=r.length,o=r.slice(),n=0;n<t;n++)o[n].next(e)},t.prototype.error=function(e){if(this.closed)throw new Z;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var r=this.observers,t=r.length,o=r.slice(),n=0;n<t;n++)o[n].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new Z;this.isStopped=!0;for(var e=this.observers,r=e.length,t=e.slice(),o=0;o<r;o++)t[o].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(r){if(this.closed)throw new Z;else return e.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(e){if(this.closed)throw new Z;else return this.hasError?(e.error(this.thrownError),L.EMPTY):this.isStopped?(e.complete(),L.EMPTY):(this.observers.push(e),new $(this,e))},t.prototype.asObservable=function(){var e=new K;return e.source=this,e},t.create=function(e,r){return new te(e,r)},t}(K),te=function(e){function t(r,t){var o=e.call(this)||this;return o.destination=r,o.source=t,o}return r(t,e),t.prototype.next=function(e){var r=this.destination;r&&r.next&&r.next(e)},t.prototype.error=function(e){var r=this.destination;r&&r.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var r=this.source;return r?this.source.subscribe(e):L.EMPTY},t}(re),oe=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,r){var t=this.connectable;t._refCount++;var o=new ne(e,t),n=r.subscribe(o);return o.closed||(o.connection=t.connect()),n},e}(),ne=function(e){function t(r,t){var o=e.call(this,r)||this;return o.connectable=t,o}return r(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(!e)return void(this.connection=null);this.connectable=null;var r=e._refCount;if(0>=r)return void(this.connection=null);if(e._refCount=r-1,1<r)return void(this.connection=null);var t=this.connection,o=e._connection;this.connection=null,o&&(!t||o===t)&&o.unsubscribe()},t}(J),se=function(e){function t(r,t){var o=e.call(this)||this;return o.source=r,o.subjectFactory=t,o._refCount=0,o._isComplete=!1,o}return r(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,e=this._connection=new L,e.add(this.source.subscribe(new ue(this.getSubject(),this))),e.closed&&(this._connection=null,e=L.EMPTY)),e},t.prototype.refCount=function(){return b()(this)},t}(K),ce=se.prototype,ie={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ce._subscribe},_isComplete:{value:ce._isComplete,writable:!0},getSubject:{value:ce.getSubject},connect:{value:ce.connect},refCount:{value:ce.refCount}},ue=function(e){function t(r,t){var o=e.call(this,r)||this;return o.connectable=t,o}return r(t,e),t.prototype._error=function(r){this._unsubscribe(),e.prototype._error.call(this,r)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var r=e._connection;e._refCount=0,e._subject=null,e._connection=null,r&&r.unsubscribe()}},t}(ee),pe=function(e){function t(){return e.call(this)||this}return r(t,e),t.prototype.schedule=function(e,r){return void 0===r&&(r=0),this},t}(L),de=function(e){function t(r,t){var o=e.call(this,r,t)||this;return o.scheduler=r,o.work=t,o.pending=!1,o}return r(t,e),t.prototype.schedule=function(e,r){if(void 0===r&&(r=0),this.closed)return this;this.state=e;var t=this.id,o=this.scheduler;return null!=t&&(this.id=this.recycleAsyncId(o,t,r)),this.pending=!0,this.delay=r,this.id=this.id||this.requestAsyncId(o,this.id,r),this},t.prototype.requestAsyncId=function(e,r,t){return void 0===t&&(t=0),setInterval(e.flush.bind(e,this),t)},t.prototype.recycleAsyncId=function(e,r,t){return(void 0===t&&(t=0),null!==t&&this.delay===t&&!1===this.pending)?r:void clearInterval(r)},t.prototype.execute=function(e,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var t=this._execute(e,r);return t?t:void(!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null)))},t.prototype._execute=function(e){var r=!1,t=void 0;try{this.work(e)}catch(o){r=!0,t=!!o&&o||new Error(o)}if(r)return this.unsubscribe(),t},t.prototype._unsubscribe=function(){var e=this.id,r=this.scheduler,t=r.actions,o=t.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==o&&t.splice(o,1),null!=e&&(this.id=this.recycleAsyncId(r,e,null)),this.delay=null},t}(pe),le=function(e){function t(r,t){var o=e.call(this,r,t)||this;return o.scheduler=r,o.work=t,o}return r(t,e),t.prototype.schedule=function(r,t){return(void 0===t&&(t=0),0<t)?e.prototype.schedule.call(this,r,t):(this.delay=t,this.state=r,this.scheduler.flush(this),this)},t.prototype.execute=function(r,t){return 0<t||this.closed?e.prototype.execute.call(this,r,t):this._execute(r,t)},t.prototype.requestAsyncId=function(r,t,o){return void 0===o&&(o=0),null!==o&&0<o||null===o&&0<this.delay?e.prototype.requestAsyncId.call(this,r,t,o):r.flush(this)},t}(de),ae=function(){function e(r,t){void 0===t&&(t=e.now),this.SchedulerAction=r,this.now=t}return e.prototype.schedule=function(e,r,t){return void 0===r&&(r=0),new this.SchedulerAction(this,e).schedule(t,r)},e.now=function(){return Date.now()},e}(),be=function(e){function t(r,o){void 0===o&&(o=ae.now);var n=e.call(this,r,function(){return t.delegate&&t.delegate!==n?t.delegate.now():o()})||this;return n.actions=[],n.active=!1,n.scheduled=void 0,n}return r(t,e),t.prototype.schedule=function(r,o,n){return void 0===o&&(o=0),t.delegate&&t.delegate!==this?t.delegate.schedule(r,o,n):e.prototype.schedule.call(this,r,o,n)},t.prototype.flush=function(e){var r=this.actions;if(this.active)return void r.push(e);var t;this.active=!0;do if(t=e.execute(e.state,e.delay))break;while(e=r.shift());if(this.active=!1,t){for(;e=r.shift();)e.unsubscribe();throw t}},t}(ae),ye=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(be),_e=new ye(le),he=new K(function(e){return e.complete()}),fe=function(e){return function(r){for(var t=0,o=e.length;t<o&&!r.closed;t++)r.next(e[t]);r.complete()}},xe=function(){function e(e,r,t){this.kind=e,this.value=r,this.error=t,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete();}},e.prototype.do=function(e,r,t){var o=this.kind;return"N"===o?e&&e(this.value):"E"===o?r&&r(this.error):"C"===o?t&&t():void 0},e.prototype.accept=function(e,r,t){return e&&"function"==typeof e.next?this.observe(e):this.do(e,r,t)},e.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return m(this.value);case"E":return g(this.error);case"C":return y();}throw new Error("unexpected notification kind value")},e.createNext=function(r){return"undefined"==typeof r?e.undefinedValueNotification:new e("N",r)},e.createError=function(r){return new e("E",void 0,r)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}(),me=function(e){function t(r,t,o){void 0===o&&(o=0);var n=e.call(this,r)||this;return n.scheduler=t,n.delay=o,n}return r(t,e),t.dispatch=function(e){var r=e.notification,t=e.destination;r.observe(t),this.unsubscribe()},t.prototype.scheduleMessage=function(e){var r=this.destination;r.add(this.scheduler.schedule(t.dispatch,this.delay,new ge(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(xe.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(xe.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(xe.createComplete()),this.unsubscribe()},t}(J),ge=function(){return function(e,r){this.notification=e,this.destination=r}}(),Se=function(e){function t(r,t,o){var n=Number.POSITIVE_INFINITY;void 0===r&&(r=n),void 0===t&&(t=n);var s=e.call(this)||this;return s.scheduler=o,s._events=[],s._infiniteTimeWindow=!1,s._bufferSize=1>r?1:r,s._windowTime=1>t?1:t,t===n?(s._infiniteTimeWindow=!0,s.next=s.nextInfiniteTimeWindow):s.next=s.nextTimeWindow,s}return r(t,e),t.prototype.nextInfiniteTimeWindow=function(r){var t=this._events;t.push(r),t.length>this._bufferSize&&t.shift(),e.prototype.next.call(this,r)},t.prototype.nextTimeWindow=function(r){this._events.push(new Ee(this._getNow(),r)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,r)},t.prototype._subscribe=function(e){var r,t=this._infiniteTimeWindow,o=t?this._events:this._trimBufferThenGetEvents(),n=this.scheduler,s=o.length;if(this.closed)throw new Z;else this.isStopped||this.hasError?r=L.EMPTY:(this.observers.push(e),r=new $(this,e));if(n&&e.add(e=new me(e,n)),t)for(var c=0;c<s&&!e.closed;c++)e.next(o[c]);else for(var c=0;c<s&&!e.closed;c++)e.next(o[c].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),r},t.prototype._getNow=function(){return(this.scheduler||_e).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=Math.max,r=this._getNow(),t=this._bufferSize,o=this._windowTime,n=this._events,s=n.length,c=0;c<s&&!(r-n[c].time<o);)c++;return s>t&&(c=e(c,s-t)),0<c&&n.splice(0,c),n},t}(re),Ee=function(){return function(e,r){this.time=e,this.value=r}}(),ve=new be(de),we=function(){function e(e,r){this.project=e,this.thisArg=r}return e.prototype.call=function(e,r){return r.subscribe(new Te(e,this.project,this.thisArg))},e}(),Te=function(e){function t(r,t,o){var n=e.call(this,r)||this;return n.project=t,n.count=0,n.thisArg=o||n,n}return r(t,e),t.prototype._next=function(e){var r;try{r=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(r)},t}(J),je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.notifyNext=function(e,r){this.destination.next(r)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(J),Oe=function(e){function t(r,t,o){var n=e.call(this)||this;return n.parent=r,n.outerValue=t,n.outerIndex=o,n.index=0,n}return r(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(J),Pe=function(e){return function(r){return e.then(function(e){r.closed||(r.next(e),r.complete())},function(e){return r.error(e)}).then(null,o),r}},Ce=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),Ae=function(e){return function(r){var t=e[Ce]();do{var o=t.next();if(o.done){r.complete();break}if(r.next(o.value),r.closed)break}while(!0);return"function"==typeof t.return&&r.add(function(){t.return&&t.return()}),r}},Ne=function(e){return function(r){var t=e[X]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");else return t.subscribe(r)}},Ie=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e},De=function(e){if(!!e&&"function"==typeof e[X])return Ne(e);if(Ie(e))return fe(e);if(v(e))return Pe(e);if(!!e&&"function"==typeof e[Ce])return Ae(e);var r=n(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+r+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")},Me=function(){function e(e,r){this.predicate=e,this.thisArg=r}return e.prototype.call=function(e,r){return r.subscribe(new ke(e,this.predicate,this.thisArg))},e}(),ke=function(e){function t(r,t,o){var n=e.call(this,r)||this;return n.predicate=t,n.thisArg=o,n.count=0,n}return r(t,e),t.prototype._next=function(e){var r;try{r=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}r&&this.destination.next(e)},t}(J),Ve=function(){function e(e){this.project=e}return e.prototype.call=function(e,r){return r.subscribe(new Ye(e,this.project))},e}(),Ye=function(e){function t(r,t){var o=e.call(this,r)||this;return o.project=t,o.index=0,o}return r(t,e),t.prototype._next=function(e){var r,t=this.index++;try{r=this.project(e,t)}catch(e){return void this.destination.error(e)}this._innerSub(r,e,t)},t.prototype._innerSub=function(e,r,t){var o=this.innerSubscription;o&&o.unsubscribe();var n=new Oe(this,void 0,void 0),s=this.destination;s.add(n),this.innerSubscription=w(this,e,r,t,n)},t.prototype._complete=function(){var r=this.innerSubscription;(!r||r.closed)&&e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(r){var t=this.destination;t.remove(r),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,r){this.destination.next(r)},t}(je);const He=new Se(1),We=He.asObservable();let Ue;He.next(!0),window.addEventListener("offline",function(){navigator&&navigator.online!=null&&He.next(navigator.online)}),window.addEventListener("online",()=>H());let ze;e.onlineListener=We,e.setPollingUrl=function(e){Ue=e},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=online-listener.umd.js.map
